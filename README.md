# 鸣潮游戏文本检索工具 (LoreSeeker Engine for Wuthering Waves)

## 项目概览

本项目是一个为B站游戏内容创作者（及所有《鸣潮》爱好者）设计的检索增强生成（RAG）工具，旨在帮助用户高效地查找、考据游戏内的文本资料。

它使用 `LightRAG` 框架构建，通过预计算知识图谱和向量索引，提供快速、精准的的游戏知识问答体验。

## 文件结构

- `data/Wuthering Waves/`: 存放处理好的《鸣潮》游戏文本数据 (`.jsonl`格式)。
- `run_preprocessing.py`: 用于预计算知识索引的Python脚本。
- `run_server.bat`: 用于启动后端API服务的Windows批处理脚本。
- `lightrag_webui/`: 前端Web界面源代码。

## 如何使用

### 步骤 1: 环境设置

1.  **安装Python依赖**:
    确保你已经安装了Python 3.10+。然后，在项目根目录打开命令行，运行以下命令来安装所有必需的库：
    ```bash
    pip install -r requirements.txt
    ```

2.  **设置API密钥**:
    本项目需要使用多个外部大语言模型API。请将以下API密钥设置为您的系统环境变量。脚本会自动读取它们。

    - `XAI_API_KEY`: 用于知识图谱构建 (本项目配置为使用 xAI 的 `grok-4-fast` 模型)。
    - `OPENAI_API_KEY`: 用于文本向量化 (推荐使用OpenAI的`text-embedding-3-large`模型)。
    - `JINA_API_KEY`: 用于文本重排序 (推荐使用Jina Rerank API)。
    - **[用于问答的LLM]**: 您还需要一个用于最终问答的LLM API密钥，请根据您在服务器配置中选择的模型（如硅基流动、魔搭等）设置相应的环境变量。

### 步骤 2: 数据预处理 (构建知识索引)

这是最关键的一步。此过程将读取 `data/` 目录下的游戏文本，构建知识图谱和向量索引，并将结果保存在一个新的 `./game_data_index` 目录中。

在项目根目录打开命令行，运行以下脚本：

```bash
python run_preprocessing.py
```

这个过程可能需要一些时间，因为它会大量调用外部API。请耐心等待它完成。成功后，您会看到一个名为 `game_data_index` 的新文件夹。

### 步骤 3: 启动后端服务

预处理完成后，您可以启动后端API服务。直接**双击运行**根目录下的 `run_server.bat` 文件即可。

一个命令行窗口将会打开并保持运行状态，这表明后端服务正在运行中。请不要关闭这个窗口。

### 步骤 4: 运行前端界面

由于构建前端需要特定的 `bun` 环境，我们建议在本地开发模式下运行它。

1.  **进入前端目录**:
    在项目根目录打开一个新的命令行窗口，然后进入 `lightrag_webui` 目录：
    ```bash
    cd lightrag_webui
    ```

2.  **安装前端依赖**:
    如果您是第一次运行，或者依赖有更新，请运行：
    ```bash
    bun install
    ```

3.  **启动前端开发服务器**:
    ```bash
    bun run dev
    ```

4.  **访问Web界面**:
    命令成功运行后，它会显示一个本地URL。在您的浏览器中打开这个地址（通常是 `http://localhost:5173` 或类似地址），您就可以开始与《鸣潮》的知识库进行问答了！
